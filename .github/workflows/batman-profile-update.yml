name: Batman Profile Auto-Update 🦇

on:
  schedule:
    - cron: "0 */6 * * *"  # Runs every 6 hours
  workflow_dispatch:  # Allows manual execution

jobs:
  update-readme:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Generate README Content
        run: |
          echo "# 🦇 The Dark Knight's GitHub Profile" > README.md
          echo "## 🚀 Gotham's Data Crusader" >> README.md
          echo "![Batman Banner](https://wallpaperaccess.com/full/3962644.jpg)" >> README.md

          echo "### 🏙️ Gotham's Latest Missions (Projects)" >> README.md
          echo "$(curl -s https://api.github.com/users/SoGhosh719/repos?sort=updated | jq -r '.[0:5] | map("- [\(.name)](\(.html_url))") | .[]')" >> README.md

          echo "" >> README.md
          echo "### 📊 Dark Mode GitHub Stats" >> README.md
          echo "![GitHub Stats](https://github-readme-stats.vercel.app/api?username=SoGhosh719&show_icons=true&theme=dark&icon_color=yellow)" >> README.md

          echo "" >> README.md
          echo "### 🔥 GitHub Streak" >> README.md
          echo "![GitHub Streak](https://github-readme-streak-stats.vercel.app/?user=SoGhosh719&theme=highcontrast&fire=yellow&ring=gray)" >> README.md

          echo "" >> README.md
          echo "### ☁️ Gotham City Weather (Updated Every 6 Hours)" >> README.md
          echo "\`\`\`" >> README.md
          curl -s "https://wttr.in/New+York?format=3" >> README.md  # New York as Gotham
          echo "\`\`\`" >> README.md

      - name: Commit and Push Changes
        run: |
          git config --global user.name "GitHub Action Bot"
          git config --global user.email "actions@github.com"
          git add README.md
          git commit -m "🦇 Auto-update Batman Profile" || exit 0
          git push
